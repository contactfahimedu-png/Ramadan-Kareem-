<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>রমজান ২০২৬ লাইভ - আব্দুল্লাহ আল ফাহিম</title>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600&family=Amiri:wght@700&display=swap" rel="stylesheet">
<style>
:root { --gold: #ffd369; --glass: rgba(255, 255, 255, 0.1); --active: rgba(255, 211, 105, 0.25); }
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Hind Siliguri', sans-serif; }
body { background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); color: white; min-height: 100vh; padding-bottom: 20px; }

.header { text-align: center; padding: 30px 20px; background: rgba(0,0,0,0.4); border-bottom: 2px solid var(--gold); position: relative; }
.calligraphy { font-family: 'Amiri', serif; font-size: 45px; color: var(--gold); margin: 10px 0; }
.container { max-width: 800px; margin: auto; padding: 15px; }

/* Countdown Section */
.timer-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: -30px; }
.timer-card { background: var(--glass); backdrop-filter: blur(15px); padding: 20px; border-radius: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.time-val { font-size: 28px; font-weight: bold; color: var(--gold); }
.countdown { font-family: monospace; font-size: 20px; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 8px; margin-top: 5px; }

/* Table & Live Highlight */
.prayer-table { width: 100%; margin-top: 30px; background: var(--glass); border-radius: 20px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 18px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); transition: 0.4s; }
th { background: rgba(255,255,255,0.15); color: var(--gold); }

/* Active Highlight Style */
.active-prayer { background: var(--active) !important; position: relative; }
.active-prayer td { color: var(--gold); font-weight: bold; }
.active-prayer::after { content: "• LIVE"; position: absolute; left: 15px; top: 50%; transform: translateY(-50%); font-size: 10px; color: #44ff44; font-weight: bold; animation: blink 1s infinite; }

@keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

.dua-section { margin-top: 30px; background: var(--glass); padding: 25px; border-radius: 20px; text-align: center; }
.dua-arabic { font-family: 'Amiri', serif; font-size: 24px; color: var(--gold); margin: 10px 0; display: block; }
.city-select { background: var(--gold); color: black; border: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; margin-bottom: 20px; cursor: pointer; }

footer { text-align: center; margin-top: 50px; padding: 30px; background: rgba(0,0,0,0.3); border-radius: 20px 20px 0 0; }
</style>
</head>
<body>

<div class="header">
    <select id="city" class="city-select" onchange="loadData()">
        <option value="Dhaka">ঢাকা</option>
        <option value="Chittagong">চট্টগ্রাম</option>
        <option value="Sylhet">সিলেট</option>
        <option value="Rajshahi">রাজশাহী</option>
        <option value="Khulna">খুলনা</option>
    </select>
    <div class="calligraphy">رمضان كريم</div>
    <h2 id="liveClock">00:00:00 AM</h2>
</div>

<div class="container">
    <div class="timer-grid">
        <div class="timer-card">
            <h3>সাহরির শেষ সময়</h3>
            <div class="time-val" id="sehriTime">--:--</div>
            <div class="countdown" id="sehriCount">00:00:00</div>
        </div>
        <div class="timer-card">
            <h3>ইফতারের সময়</h3>
            <div class="time-val" id="iftarTime">--:--</div>
            <div class="countdown" id="iftarCount">00:00:00</div>
        </div>
    </div>

    <div class="prayer-table">
        <table>
            <thead><tr><th>নামাজ</th><th>সময়</th></tr></thead>
            <tbody>
                <tr id="row-Fajr"><td>ফজর (সাহরি শেষ)</td><td id="fajr">--:--</td></tr>
                <tr id="row-Dhuhr"><td>যোহর</td><td id="dhuhr">--:--</td></tr>
                <tr id="row-Asr"><td>আসর</td><td id="asr">--:--</td></tr>
                <tr id="row-Maghrib"><td>মাগরিব (ইফতার)</td><td id="maghrib">--:--</td></tr>
                <tr id="row-Isha"><td>এশা</td><td id="isha">--:--</td></tr>
            </tbody>
        </table>
    </div>

    <div class="dua-section">
        <span style="color:var(--gold); font-weight:bold;">ইফতারের দোয়া</span>
        <span class="dua-arabic">اَللّٰহুম্মাহ ল্যাকা সুমতু ওয়া আলা রিযকিকা আফতারতু</span>
        <p>উচ্চারণ: আল্লাহুম্মা লাকা সুমতু ওয়া আলা রিযকিকা আফতারতু।</p>
    </div>
</div>

<footer>
    <p style="font-size: 13px; color: #999;">Developed by</p>
    <p style="color: var(--gold); font-size: 20px; font-weight: 600;">আব্দুল্লাহ আল ফাহিম</p>
    <p style="font-size: 11px; color: #666; margin-top: 10px;">&copy; ২০২৬ অল রাইটস রিজার্ভড</p>
</footer>

<script>
let prayerTimes = {};

function formatTime(t) {
    if(!t) return "--:--";
    let [h, m] = t.split(':');
    let hr = parseInt(h);
    let ampm = hr >= 12 ? 'PM' : 'AM';
    hr = hr % 12 || 12;
    return `${hr}:${m} ${ampm}`;
}

async function loadData() {
    try {
        const city = document.getElementById('city').value;
        const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=Bangladesh&method=1`);
        const data = await res.json();
        prayerTimes = data.data.timings;

        document.getElementById('fajr').innerText = formatTime(prayerTimes.Fajr);
        document.getElementById('dhuhr').innerText = formatTime(prayerTimes.Dhuhr);
        document.getElementById('asr').innerText = formatTime(prayerTimes.Asr);
        document.getElementById('maghrib').innerText = formatTime(prayerTimes.Maghrib);
        document.getElementById('isha').innerText = formatTime(prayerTimes.Isha);
        
        document.getElementById('sehriTime').innerText = formatTime(prayerTimes.Fajr);
        document.getElementById('iftarTime').innerText = formatTime(prayerTimes.Maghrib);
        
        updateLiveTracking();
    } catch (e) {
        console.log("Error loading data:", e);
    }
}

function updateLiveTracking() {
    const now = new Date();
    document.getElementById('liveClock').innerText = now.toLocaleTimeString('en-US', {hour12:true});

    if (!prayerTimes.Fajr) return;

    const getT = (s) => {
        let d = new Date();
        let [h, m] = s.split(':');
        d.setHours(parseInt(h), parseInt(m), 0);
        return d;
    };

    // Countdown
    let sT = getT(prayerTimes.Fajr);
    let iT = getT(prayerTimes.Maghrib);
    if(now > sT) sT.setDate(sT.getDate() + 1);
    if(now > iT) iT.setDate(iT.getDate() + 1);

    const diff = (target, id) => {
        let ms = target - now;
        let h = Math.floor(ms/3600000);
        let m = Math.floor((ms%3600000)/60000);
        let s = Math.floor((ms%60000)/1000);
        document.getElementById(id).innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    };
    diff(sT, 'sehriCount');
    diff(iT, 'iftarCount');

    // Live Row Highlighting Logic
    const pList = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
    let currentIdx = -1;

    for (let i = 0; i < pList.length; i++) {
        let pTime = getT(prayerTimes[pList[i]]);
        if (now >= pTime) {
            currentIdx = i;
        }
    }

    pList.forEach((p, index) => {
        const row = document.getElementById(`row-${p}`);
        row.classList.remove('active-prayer');
        if(index === currentIdx) {
            row.classList.add('active-prayer');
        }
    });
}

loadData();
setInterval(updateLiveTracking, 1000);
</script>
</body>
</html>
